# Read about fixtures at http://ar.rubyonrails.org/classes/Fixtures.html

<% milestones= Array.new(20) {|i| {:name => "SRC680_m#{i}", :parent => "SRC680"} } %>
<% cwses = Array.new(20) {|i| {:name => "cws_#{i}", :parent => milestones[rand(20)]} } %>
<% trees = milestones + cwses %>

<% builders = 5 %>
<% builds_per_builder = 10 %>
<% hosts_per_builder = 3 %>

<% @id= 0 %>
<% def take_id; @id+= 1; @id; end %>

<% builders.times do |builder| %>
<% builds_per_builder.times do |build_number| %>
<%= "build_#{builder}-#{build_number}:" %>
  id: <%= take_id %>
  pws: <%= trees[rand(trees.length)][:parent] %>
  cws: <%= trees[rand(trees.length)][:name] %>
  builder: <%= builder %>
  host: <%= "#{builder}-host_#{rand(hosts_per_builder)}" %>
  build_number: <%= build_number %>
  created_at: <%= Time.at(@id * 3600).to_s :db %>  
<% end %> #builds_per_builder.times
<% end %> #builder.times
