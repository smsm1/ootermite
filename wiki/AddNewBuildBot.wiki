#summary How to add a new bot
#labels slave
= Introduction =

There is a number of things that you need to do to add a new build slave. Slightly fuller/alternative instructions are available from [AddNewBuildBotMacOSX].

You will need the following prerequisites:

  * a working build environment for OpenOffice.org. Please make sure that you have already managed to build OpenOffice.org on the machine that you want to put the bot on. See http://wiki.services.openoffice.org/ for build instructions.
  * python 2.4 or later (Use *python -V* to get the python version number)
  * twisted 2.4 or later (most OSs provide this as package, e.g. python-twisted or SUNWpython-twisted)
  * perl (and the following modules: LWP::Simple, File::Copy::Recursive, Config::Auto which can be installed from CPAN)
{{{
sudo perl -MCPAN -e shell
install LWP::Simple
install File::Copy::Recursive
install Config::Auto
exit
}}}
  * bash
  * subversion/mercurial (for the buildbot scripts and DEV300 codeline)

= Details =

  # Grab a copy of [https://sourceforge.net/project/showfiles.php?group_id=73177 Buildbot 0.7.9] or newer
  # Unpack the source
  # Build the buildbot [http://djmitche.github.com/buildbot/docs/0.7.9/#Installing-the-code the buildbot manual]
  # Create the build-slave
{{{
buildbot create-slave BASEDIR termite.services.openoffice.org:9999 SLAVENAME PASSWORD
}}}
  This will create a Build Slave Basedir and the important buildbot.tac file.
  # make sure the buildbot.tac file also containes a line {{{umask = 022}}}
  # Grab the scripts from svn directly in to the BASEDIR
{{{
svn checkout http://ootermite.googlecode.com/svn/trunk/buildbot/slave/ BASEDIR
}}}
  # Edit the info/admin and info/host files to contain information about yourself/host
  # Customise the scripts for your platform if needed.
  ## Contact the project to have your changes integrated into the codeline else automatic updates won't work
  # Copy the steps.config.sample file to steps.config and customize it.
  # Customize cws_fetch.cfg
  # Create a build_copy dir (used by buildprep) with things you wish to be copied into the source tree after checkout and before configure (such as mozilla sourcetarballs patches)
  # EMail Gregor Hartmann (Gregor.Hartmann@sun.com> (or mikeleib or shaunmcdonald) the botname and password and a screen name to add your bot to the master
  # Start your bot
{{{
buildbot start BASEDIR (the dir containing the scripts ...)
}}}
  # It should show up as online at http://termite.services.openoffice.org/ and you should be able to manually submit builds to it.